{"version":3,"sources":["src/app/auth/register/components/registration/registration.component.html","src/app/auth/register/components/registration/registration.component.scss","src/app/auth/register/components/registration/registration.component.ts","src/app/auth/register/components/registration/registration.service.ts","src/app/auth/register/register-routing.module.ts","src/app/auth/register/register.module.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<div class=\\\"registration-wrapper\\\">\\n    <div class=\\\"box\\\">\\n        <h2>Register</h2>\\n        <form [formGroup]=\\\"registerForm\\\">\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"email\\\">Email</label>\\n                <input type=\\\"text\\\" formControlName=\\\"email\\\" class=\\\"form-control\\\"/>\\n                <div *ngIf=\\\"email?.errors && email?.touched\\\" class=\\\"error-text\\\">\\n                    {{ getErrorMessage(email) }}\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"username\\\">Username</label>\\n                <input type=\\\"text\\\" formControlName=\\\"username\\\" class=\\\"form-control\\\"/>\\n                <div *ngIf=\\\"username?.errors && username?.touched\\\" class=\\\"error-text\\\">\\n                    {{ getErrorMessage(username) }}\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"password\\\">Password</label>\\n                <input type=\\\"password\\\" formControlName=\\\"password\\\" class=\\\"form-control\\\" />\\n                <div *ngIf=\\\"password?.errors && password?.touched\\\" class=\\\"error-text\\\">\\n                    {{ getErrorMessage(password) }}\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"confirmPassword\\\">Confirm password</label>\\n                <input type=\\\"password\\\" formControlName=\\\"confirmPassword\\\" class=\\\"form-control\\\" />\\n                <div *ngIf=\\\"confirmPassword?.errors && (confirmPassword?.touched || password?.touched)\\\" class=\\\"error-text\\\">\\n                    {{ getErrorMessage(confirmPassword) }}\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"avatar\\\">Avatar</label>\\n                <input  #file type=\\\"file\\\" [hidden]='true' class=\\\"form-control-file\\\" accept=\\\"image/*\\\" (change)=\\\"onFileChange($event)\\\" >\\n                <button \\n                    [ngClass]=\\\"{'form-control btn btn-sm' : true, 'btn-light': !fileName, 'btn-success': fileName}\\\"  \\n                    (click)=\\\"file.click()\\\"\\n                >Choose avatar</button>\\n                <label class=\\\"font-itali\\\"> {{fileName}}</label>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <button [disabled]=\\\"registerForm?.invalid || error\\\" class=\\\"btn btn-primary\\\" (click)=\\\"onSubmit(registerForm)\\\">Register</button>\\n                <a [routerLink]=\\\"['/login']\\\" class=\\\"btn btn-link\\\">Cancel</a>\\n            </div>\\n            <div [hidden]='!error' class=\\\"alert alert-danger\\\" role=\\\"alert\\\">\\n                {{ error }}\\n            </div>\\n        </form>\\n            \\n    </div>\\n</div>\\n\"","export default \".registration-wrapper {\\n  background: #D7DFE7;\\n  height: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center; }\\n  .registration-wrapper .box {\\n    width: 40%; }\\n  .ng-valid:not(form) {\\n  border-left: 5px solid #42A948; }\\n  .error-text {\\n  color: #a94442;\\n  padding: 0px 7px; }\\n  @media screen and (max-width: 900px) {\\n  .login-wrapper .box {\\n    width: 60%; } }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXV0aC9yZWdpc3Rlci9jb21wb25lbnRzL3JlZ2lzdHJhdGlvbi9EOlxcR2l0XFxHZW5lc2lzXFx3ZWIvc3JjXFxhcHBcXGF1dGhcXHJlZ2lzdGVyXFxjb21wb25lbnRzXFxyZWdpc3RyYXRpb25cXHJlZ2lzdHJhdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLG1CQUFtQjtFQUNuQixZQUFZO0VBRVosYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUIsRUFBQTtFQU52QjtJQVNRLFVBQVUsRUFBQTtFQUlsQjtFQUNJLDhCQUE4QixFQUFBO0VBR2xDO0VBQ0ksY0FBYztFQUNkLGdCQUFnQixFQUFBO0VBR3BCO0VBQ0k7SUFFUSxVQUFVLEVBQUEsRUFDYiIsImZpbGUiOiJzcmMvYXBwL2F1dGgvcmVnaXN0ZXIvY29tcG9uZW50cy9yZWdpc3RyYXRpb24vcmVnaXN0cmF0aW9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnJlZ2lzdHJhdGlvbi13cmFwcGVyIHtcclxuICAgIGJhY2tncm91bmQ6ICNEN0RGRTc7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcblxyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHJcbiAgICAuYm94IHtcclxuICAgICAgICB3aWR0aDogNDAlO1xyXG4gICAgfVxyXG59XHJcblxyXG4ubmctdmFsaWQ6bm90KGZvcm0pICB7XHJcbiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkICM0MkE5NDg7XHJcbn1cclxuXHJcbi5lcnJvci10ZXh0IHtcclxuICAgIGNvbG9yOiAjYTk0NDQyO1xyXG4gICAgcGFkZGluZzogMHB4IDdweDtcclxufVxyXG5cclxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogOTAwcHgpIHtcclxuICAgIC5sb2dpbi13cmFwcGVyIHtcclxuICAgICAgICAuYm94IHtcclxuICAgICAgICAgICAgd2lkdGg6IDYwJTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0= */\"","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators, AbstractControl } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Store, select } from '@ngrx/store';\nimport * as fromUser from '../../../../ngrx/user-module/reducers';\nimport { take, map } from 'rxjs/operators';\n// services\nimport { RegistrationService } from './registration.service';\nimport { SetUserData } from 'src/app/ngrx/user-module/actions/user.actions';\nimport { User } from 'src/app/ngrx/user-module/models/user';\nimport { LoginService } from 'src/app/auth/login/components/login/login.service';\n\n@Component({\n\tselector: 'app-registration',\n\ttemplateUrl: './registration.component.html',\n\tstyleUrls: ['./registration.component.scss'],\n\tproviders: [LoginService, RegistrationService]\n})\nexport class RegistrationComponent implements OnInit {\n\n\tpublic registerForm: FormGroup;\n\tpublic error = '';\n\tpublic fileName = '';\n\tpublic saltRounds = 10;\n\n\tpublic isUserLoggedIn$ = this.store.pipe(select(fromUser.isUserLoggedIn));\n\n\tconstructor(\n\t\tprivate formBuilder: FormBuilder,\n\t\tprivate router: Router,\n\t\tprivate store: Store<any>,\n\t\tprivate cd: ChangeDetectorRef,\n\t\tprivate loginService: LoginService,\n\t\tprivate registrationService: RegistrationService\n\t) {\n\t\tthis.redirectIfAlreadyLoggedIn();\n\t}\n\n\tngOnInit() {\n\t\tthis.registerForm = this.formBuilder.group({\n\t\t\temail: [\n\t\t\t\t'test@gmail.com',\n\t\t\t\t[Validators.required],\n\t\t\t\tthis.validateEmailNotTaken.bind(this)\n\t\t\t],\n\t\t\tusername: [\n\t\t\t\t'test',\n\t\t\t\t[Validators.required],\n\t\t\t\tthis.validateUserNameNotTaken.bind(this)\n\t\t\t],\n\t\t\tfile: [null, Validators.required],\n\t\t\tpassword: ['test123', [Validators.required, Validators.minLength(6)]],\n\t\t\tconfirmPassword: ['test123', [Validators.required, Validators.minLength(6)]]\n\t\t}, {\n\t\t\tvalidator: this.MustMatch('password', 'confirmPassword')\n\t\t});\n\t}\n\n\tvalidateEmailNotTaken(control: AbstractControl) {\n\t\treturn this.registrationService.checkEmailNotTaken(control.value).pipe(\n\t\t\tmap(res => {\n\t\t\t\treturn res ? null : { emailTaken: true };\n\t\t\t})\n\t\t);\n\t}\n\n\tvalidateUserNameNotTaken(control: AbstractControl) {\n\t\treturn this.registrationService.checkUserNameNotTaken(control.value).pipe(\n\t\t\tmap(res => {\n\t\t\t\treturn res ? null : { userNameTaken: true };\n\t\t\t})\n\t\t);\n\t}\n\n\tredirectIfAlreadyLoggedIn() {\n\t\tthis.isUserLoggedIn$.pipe(take(1)).subscribe((userLoggedIn: boolean) => {\n\t\t\tif (userLoggedIn) {\n\t\t\t\tthis.router.navigateByUrl('chat');\n\t\t\t}\n\t\t})\n\t}\n\n\tMustMatch(controlName: string, matchingControlName: string) {\n\t\treturn (formGroup: FormGroup) => {\n\t\t\tconst control = formGroup.controls[controlName];\n\t\t\tconst matchingControl = formGroup.controls[matchingControlName];\n\n\t\t\tif (matchingControl.errors && !matchingControl.errors.mustMatch) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (control.value !== matchingControl.value) {\n\t\t\t\tmatchingControl.setErrors({ mustMatch: true });\n\t\t\t} else {\n\t\t\t\tmatchingControl.setErrors(null);\n\t\t\t}\n\t\t}\n\t}\n\n\tget username() { return this.registerForm.get('username'); }\n\tget email() { return this.registerForm.get('email'); }\n\tget file() { return this.registerForm.get('file'); }\n\tget password() { return this.registerForm.get('password'); }\n\tget confirmPassword() { return this.registerForm.get('confirmPassword'); }\n\n\tgetErrorMessage(e: any) {\n\t\tif (e.errors) {\n\t\t\tconst K = Object.keys(e.errors);\n\t\t\tswitch (K[0]) {\n\t\t\t\tcase 'email': return 'Incorrect format';\n\t\t\t\tcase 'required': return 'Field is required';\n\t\t\t\tcase 'mustMatch': return 'Passwords must match';\n\t\t\t\tcase 'emailTaken': return 'Email taken';\n\t\t\t\tcase 'userNameTaken': return 'User name is taken';\n\t\t\t\tcase 'minlength': return 'Password is too short (minimum is 6 characters)';\n\t\t\t\tdefault: return '';\n\t\t\t}\n\t\t}\n\t}\n\n\tonFileChange(event: any) {\n\t\tconst reader = new FileReader();\n\n\t\tif (event.target.files && event.target.files.length) {\n\t\t\tconst [file] = event.target.files;\n\t\t\tthis.fileName = file.name;\n\n\t\t\treader.readAsDataURL(file);\n\t\t\treader.onload = () => {\n\t\t\t\tthis.registerForm.patchValue({\n\t\t\t\t\tfile: reader.result\n\t\t\t\t});\n\t\t\t\tthis.cd.markForCheck();\n\t\t\t};\n\t\t}\n\t}\n\n\tonSubmit() {\n\t\tconst data = {\n\t\t\tusername: this.username.value,\n\t\t\temail: this.email.value,\n\t\t\tpassword: this.password.value,\n\t\t\tavatar: this.file.value\n\t\t}\n\n\t\tthis.registrationService.createUser(data)\n\t\t.pipe(take(1))\n\t\t.subscribe(\n\t\t  (res: User) => {\n\t\t\tthis.login({ username: data.email, password: data.password});\n\t\t  },\n\t\t  (error: string) => {\n\t\t\tthis.error = 'Error'\n\t\t\tthis.cleanErrorText();\n\t\t  }\n\t\t)\n\t}\n\n\tlogin(data) {\n\t\tthis.loginService.login(data)\n\t\t.pipe(take(1))\n\t\t.subscribe(\n\t\t  (res: User) => {\n\t\t\tthis.store.dispatch(new SetUserData(res));\n\t\t\tthis.router.navigateByUrl('chat');\n\t\t  },\n\t\t  (error: string) => {\n\t\t\tthis.error = \"Can't login\"; \n\t\t\tthis.cleanErrorText();\n\t\t  }\n\t\t)\n\t}\n\n\tcleanErrorText() {\n\t\tthis.registerForm.valueChanges\n\t\t.pipe(take(1))\n\t\t.subscribe(e => {\n\t\t  this.error = '';\n\t\t}) \n\t}\n\n}\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { HttpHeaders } from '@angular/common/http';\r\nimport { environment } from '../../../../../environments/environment';\r\n\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { User } from 'src/app/ngrx/user-module/models/user';\r\n\r\nconst httpOptions = {\r\n  headers: new HttpHeaders({\r\n    'Content-Type':  'application/json'\r\n  })\r\n};\r\n\r\n@Injectable()\r\nexport class RegistrationService {\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  checkEmailNotTaken(email: string) {\r\n    return this.http.post(`${environment.apiUrl}/user/allUserEmails`, {email: email}, httpOptions).pipe(\r\n        map((isUniq: boolean) => isUniq)\r\n    )\r\n  }\r\n\r\n  checkUserNameNotTaken(username: string) {\r\n    return this.http.post(`${environment.apiUrl}/user/isUserNameIsUniq`, {name: username}, httpOptions).pipe(\r\n        map((isUniq: boolean) => isUniq)\r\n    )\r\n  }\r\n\r\n  createUser(data: User): Observable<any> {\r\n    return this.http.post<User>(`${environment.apiUrl}/auth/registerUser`, data, httpOptions)\r\n  }\r\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n// components\nimport { RegistrationComponent } from './components/registration/registration.component';\n\nconst routes: Routes = [\n  { path: '', component: RegistrationComponent }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [RouterModule]\n})\nexport class RegisterRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { RegisterRoutingModule } from './register-routing.module';\nimport { RegistrationComponent } from './components/registration/registration.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [RegistrationComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RegisterRoutingModule\n  ]\n})\nexport class RegisterModule { }\n"],"sourceRoot":"webpack:///"}