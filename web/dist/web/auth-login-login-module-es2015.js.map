{"version":3,"sources":["./src/app/auth/login/components/login/login.component.html","./src/app/auth/login/components/login/login.component.scss","./src/app/auth/login/components/login/login.component.ts","./src/app/auth/login/login-routing.module.ts","./src/app/auth/login/login.module.ts"],"names":[],"mappings":"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","file":"auth-login-login-module-es2015.js","sourcesContent":["export default \"<div class=\\\"login-wrapper\\\">\\n  <div class=\\\"box\\\">\\n    <h2>Login</h2>\\n    <form [formGroup]=\\\"loginForm\\\">\\n      <div class=\\\"form-group\\\">\\n        <label for=\\\"email\\\">Email</label>\\n        <input type=\\\"text\\\" formControlName=\\\"email\\\" class=\\\"form-control\\\"/>\\n        <div *ngIf=\\\"email?.errors && email?.touched\\\" class=\\\"error-text\\\">\\n          {{ getErrorMessage(email) }}\\n        </div>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label for=\\\"password\\\">Password</label>\\n        <input type=\\\"password\\\" formControlName=\\\"password\\\" class=\\\"form-control\\\" />\\n        <div *ngIf=\\\"password?.errors && password?.touched\\\" class=\\\"error-text\\\">\\n          {{ getErrorMessage(password) }}\\n        </div>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <button [disabled]=\\\"loginForm?.invalid || error\\\" class=\\\"btn btn-primary\\\" (click)=\\\"onSubmit()\\\">Login</button>\\n        <a [routerLink]=\\\"['/registration']\\\" class=\\\"btn btn-link\\\">Registration</a>\\n      </div>\\n      <div [hidden]='!error' class=\\\"alert alert-danger\\\" role=\\\"alert\\\">\\n        {{ error }}\\n      </div>\\n    </form> \\n  </div>\\n</div>\"","export default \".login-wrapper {\\n  background: #D7DFE7;\\n  height: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center; }\\n  .login-wrapper .box {\\n    width: 30%;\\n    border: 0px; }\\n  .ng-valid:not(form) {\\n  border-left: 5px solid #42A948; }\\n  .error-text {\\n  color: #a94442;\\n  padding: 0px 7px; }\\n  @media screen and (max-width: 900px) {\\n  .login-wrapper .box {\\n    width: 60%; } }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXV0aC9sb2dpbi9jb21wb25lbnRzL2xvZ2luL0Q6XFxHaXRcXEdlbmVzaXNcXHdlYi9zcmNcXGFwcFxcYXV0aFxcbG9naW5cXGNvbXBvbmVudHNcXGxvZ2luXFxsb2dpbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLG1CQUFtQjtFQUNuQixZQUFZO0VBRVosYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUIsRUFBQTtFQU52QjtJQVNRLFVBQVU7SUFDVixXQUFXLEVBQUE7RUFJbkI7RUFDSSw4QkFBOEIsRUFBQTtFQUdsQztFQUNJLGNBQWM7RUFDZCxnQkFBZ0IsRUFBQTtFQUdwQjtFQUNJO0lBRVEsVUFBVSxFQUFBLEVBQ2IiLCJmaWxlIjoic3JjL2FwcC9hdXRoL2xvZ2luL2NvbXBvbmVudHMvbG9naW4vbG9naW4uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubG9naW4td3JhcHBlciB7XHJcbiAgICBiYWNrZ3JvdW5kOiAjRDdERkU3O1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG5cclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblxyXG4gICAgLmJveCB7XHJcbiAgICAgICAgd2lkdGg6IDMwJTtcclxuICAgICAgICBib3JkZXI6IDBweDtcclxuICAgIH1cclxufVxyXG5cclxuLm5nLXZhbGlkOm5vdChmb3JtKSAge1xyXG4gICAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjNDJBOTQ4O1xyXG59XHJcblxyXG4uZXJyb3ItdGV4dCB7XHJcbiAgICBjb2xvcjogI2E5NDQ0MjtcclxuICAgIHBhZGRpbmc6IDBweCA3cHg7XHJcbn1cclxuXHJcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDkwMHB4KSB7XHJcbiAgICAubG9naW4td3JhcHBlciB7XHJcbiAgICAgICAgLmJveCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA2MCU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19 */\"","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { take } from 'rxjs/operators';\n\nimport { LoginService } from './login.service';\n// ngrx\nimport { Store, select } from '@ngrx/store';\nimport { SetUserData } from '../../../../ngrx/user-module/actions/user.actions';\nimport * as fromUser from '../../../../ngrx/user-module/reducers';\n\nimport { User } from '../../../../ngrx/user-module/models/user';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss'],\n  providers: [LoginService],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class LoginComponent implements OnInit {\n\n  public loginForm: FormGroup;\n  public error = '';\n\n  public isUserLoggedIn$ = this.store.pipe(select(fromUser.isUserLoggedIn));\n\n  constructor(\n      private formBuilder: FormBuilder,\n      private loginService: LoginService,\n      private router: Router,\n      private store: Store<any>\n  ) {\n    this.redirectIfAlreadyLoggedIn();\n  }\n\n  redirectIfAlreadyLoggedIn() {\n    this.isUserLoggedIn$.pipe(take(1)).subscribe((userLoggedIn: boolean) => {\n      if (userLoggedIn) {\n        this.router.navigateByUrl('chat');\n      }\n    })\n  }\n\n  get email() { return this.loginForm.get('email'); }\n  get password() { return this.loginForm.get('password'); }\n  \n  ngOnInit() {\n    this.loginForm = this.formBuilder.group({\n        email: ['test@gmail.com', [Validators.required, Validators.email]],\n        password: ['test123', [Validators.required]]\n    });\n  }\n\n  getErrorMessage(e: any) {\n\t\tif (e.errors) {\n\t\t\tconst K = Object.keys(e.errors);\n\t\t\tswitch (K[0]) {\n        case 'email': return 'Incorrect format.';\n\t\t\t\tcase 'required': return 'Field is required';\n\t\t\t\tdefault: return '';\n\t\t\t}\n\t\t}\n\t}\n\n  onSubmit() {\n    const data = {\n      username: this.email.value,\n      password: this.password.value\n    }\n\n    this.loginService.login(data)\n    .pipe(take(1))\n    .subscribe(\n      (res: User) => {\n        this.store.dispatch(new SetUserData(res));\n        this.router.navigateByUrl('chat');\n      },\n      (error: string) => {\n        this.error = 'Incorrect email or password.'\n        this.loginForm.valueChanges\n        .pipe(take(1))\n        .subscribe(e => {\n          this.error = '';\n        })   \n      }\n    )\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n// components\nimport { LoginComponent } from './components/login/login.component';\n\nconst routes: Routes = [\n  { path: '', component: LoginComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { LoginComponent } from './components/login/login.component';\nimport { LoginRoutingModule } from './login-routing.module';\n\n@NgModule({\n  declarations: [\n    LoginComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    LoginRoutingModule\n  ]\n})\nexport class LoginModule { }\n"],"sourceRoot":"webpack:///"}