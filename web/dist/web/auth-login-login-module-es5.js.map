{"version":3,"sources":["src/app/auth/login/components/login/login.component.html","src/app/auth/login/components/login/login.component.scss","src/app/auth/login/components/login/login.component.ts","src/app/auth/login/login-routing.module.ts","src/app/auth/login/login.module.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<div class=\\\"login-wrapper\\\">\\n  <div class=\\\"box\\\">\\n    <h2>Login</h2>\\n    <form [formGroup]=\\\"loginForm\\\">\\n      <div class=\\\"form-group\\\">\\n        <label for=\\\"email\\\">Email</label>\\n        <input type=\\\"text\\\" formControlName=\\\"email\\\" class=\\\"form-control\\\"/>\\n        <div *ngIf=\\\"email?.errors && email?.touched\\\" class=\\\"error-text\\\">\\n          {{ getErrorMessage(email) }}\\n        </div>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label for=\\\"password\\\">Password</label>\\n        <input type=\\\"password\\\" formControlName=\\\"password\\\" class=\\\"form-control\\\" />\\n        <div *ngIf=\\\"password?.errors && password?.touched\\\" class=\\\"error-text\\\">\\n          {{ getErrorMessage(password) }}\\n        </div>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <button [disabled]=\\\"loginForm?.invalid || error\\\" class=\\\"btn btn-primary\\\" (click)=\\\"onSubmit()\\\">Login</button>\\n        <a [routerLink]=\\\"['/registration']\\\" class=\\\"btn btn-link\\\">Registration</a>\\n      </div>\\n      <div [hidden]='!error' class=\\\"alert alert-danger\\\" role=\\\"alert\\\">\\n        {{ error }}\\n      </div>\\n    </form> \\n  </div>\\n</div>\"","export default \".login-wrapper {\\n  background: #D7DFE7;\\n  height: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center; }\\n  .login-wrapper .box {\\n    width: 30%;\\n    border: 0px; }\\n  .ng-valid:not(form) {\\n  border-left: 5px solid #42A948; }\\n  .error-text {\\n  color: #a94442;\\n  padding: 0px 7px; }\\n  @media screen and (max-width: 900px) {\\n  .login-wrapper .box {\\n    width: 60%; } }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXV0aC9sb2dpbi9jb21wb25lbnRzL2xvZ2luL0Q6XFxHaXRcXEdlbmVzaXNcXHdlYi9zcmNcXGFwcFxcYXV0aFxcbG9naW5cXGNvbXBvbmVudHNcXGxvZ2luXFxsb2dpbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLG1CQUFtQjtFQUNuQixZQUFZO0VBRVosYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUIsRUFBQTtFQU52QjtJQVNRLFVBQVU7SUFDVixXQUFXLEVBQUE7RUFJbkI7RUFDSSw4QkFBOEIsRUFBQTtFQUdsQztFQUNJLGNBQWM7RUFDZCxnQkFBZ0IsRUFBQTtFQUdwQjtFQUNJO0lBRVEsVUFBVSxFQUFBLEVBQ2IiLCJmaWxlIjoic3JjL2FwcC9hdXRoL2xvZ2luL2NvbXBvbmVudHMvbG9naW4vbG9naW4uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubG9naW4td3JhcHBlciB7XHJcbiAgICBiYWNrZ3JvdW5kOiAjRDdERkU3O1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG5cclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblxyXG4gICAgLmJveCB7XHJcbiAgICAgICAgd2lkdGg6IDMwJTtcclxuICAgICAgICBib3JkZXI6IDBweDtcclxuICAgIH1cclxufVxyXG5cclxuLm5nLXZhbGlkOm5vdChmb3JtKSAge1xyXG4gICAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjNDJBOTQ4O1xyXG59XHJcblxyXG4uZXJyb3ItdGV4dCB7XHJcbiAgICBjb2xvcjogI2E5NDQ0MjtcclxuICAgIHBhZGRpbmc6IDBweCA3cHg7XHJcbn1cclxuXHJcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDkwMHB4KSB7XHJcbiAgICAubG9naW4td3JhcHBlciB7XHJcbiAgICAgICAgLmJveCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA2MCU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19 */\"","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { take } from 'rxjs/operators';\n\nimport { LoginService } from './login.service';\n// ngrx\nimport { Store, select } from '@ngrx/store';\nimport { SetUserData } from '../../../../ngrx/user-module/actions/user.actions';\nimport * as fromUser from '../../../../ngrx/user-module/reducers';\n\nimport { User } from '../../../../ngrx/user-module/models/user';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss'],\n  providers: [LoginService],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class LoginComponent implements OnInit {\n\n  public loginForm: FormGroup;\n  public error = '';\n\n  public isUserLoggedIn$ = this.store.pipe(select(fromUser.isUserLoggedIn));\n\n  constructor(\n      private formBuilder: FormBuilder,\n      private loginService: LoginService,\n      private router: Router,\n      private store: Store<any>\n  ) {\n    this.redirectIfAlreadyLoggedIn();\n  }\n\n  redirectIfAlreadyLoggedIn() {\n    this.isUserLoggedIn$.pipe(take(1)).subscribe((userLoggedIn: boolean) => {\n      if (userLoggedIn) {\n        this.router.navigateByUrl('chat');\n      }\n    })\n  }\n\n  get email() { return this.loginForm.get('email'); }\n  get password() { return this.loginForm.get('password'); }\n  \n  ngOnInit() {\n    this.loginForm = this.formBuilder.group({\n        email: ['test@gmail.com', [Validators.required, Validators.email]],\n        password: ['test123', [Validators.required]]\n    });\n  }\n\n  getErrorMessage(e: any) {\n\t\tif (e.errors) {\n\t\t\tconst K = Object.keys(e.errors);\n\t\t\tswitch (K[0]) {\n        case 'email': return 'Incorrect format.';\n\t\t\t\tcase 'required': return 'Field is required';\n\t\t\t\tdefault: return '';\n\t\t\t}\n\t\t}\n\t}\n\n  onSubmit() {\n    const data = {\n      username: this.email.value,\n      password: this.password.value\n    }\n\n    this.loginService.login(data)\n    .pipe(take(1))\n    .subscribe(\n      (res: User) => {\n        this.store.dispatch(new SetUserData(res));\n        this.router.navigateByUrl('chat');\n      },\n      (error: string) => {\n        this.error = 'Incorrect email or password.'\n        this.loginForm.valueChanges\n        .pipe(take(1))\n        .subscribe(e => {\n          this.error = '';\n        })   \n      }\n    )\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n// components\nimport { LoginComponent } from './components/login/login.component';\n\nconst routes: Routes = [\n  { path: '', component: LoginComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { LoginComponent } from './components/login/login.component';\nimport { LoginRoutingModule } from './login-routing.module';\n\n@NgModule({\n  declarations: [\n    LoginComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    LoginRoutingModule\n  ]\n})\nexport class LoginModule { }\n"],"sourceRoot":"webpack:///"}