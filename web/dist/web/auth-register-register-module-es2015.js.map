{"version":3,"sources":["./src/app/auth/register/components/registration/registration.component.html","./src/app/auth/register/components/registration/registration.component.scss","./src/app/auth/register/components/registration/registration.component.ts","./src/app/auth/register/components/registration/registration.service.ts","./src/app/auth/register/register-routing.module.ts","./src/app/auth/register/register.module.ts"],"names":[],"mappings":"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","file":"auth-register-register-module-es2015.js","sourcesContent":["export default \"<div class=\\\"registration-wrapper\\\">\\n    <div class=\\\"box\\\">\\n        <h2>Register</h2>\\n        <form [formGroup]=\\\"registerForm\\\">\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"email\\\">Email</label>\\n                <input type=\\\"text\\\" formControlName=\\\"email\\\" class=\\\"form-control\\\"/>\\n                <div *ngIf=\\\"email?.errors && email?.touched\\\" class=\\\"error-text\\\">\\n                    {{ getErrorMessage(email) }}\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"username\\\">Username</label>\\n                <input type=\\\"text\\\" formControlName=\\\"username\\\" class=\\\"form-control\\\"/>\\n                <div *ngIf=\\\"username?.errors && username?.touched\\\" class=\\\"error-text\\\">\\n                    {{ getErrorMessage(username) }}\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"password\\\">Password</label>\\n                <input type=\\\"password\\\" formControlName=\\\"password\\\" class=\\\"form-control\\\" />\\n                <div *ngIf=\\\"password?.errors && password?.touched\\\" class=\\\"error-text\\\">\\n                    {{ getErrorMessage(password) }}\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"confirmPassword\\\">Confirm password</label>\\n                <input type=\\\"password\\\" formControlName=\\\"confirmPassword\\\" class=\\\"form-control\\\" />\\n                <div *ngIf=\\\"confirmPassword?.errors && (confirmPassword?.touched || password?.touched)\\\" class=\\\"error-text\\\">\\n                    {{ getErrorMessage(confirmPassword) }}\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"avatar\\\">Avatar</label>\\n                <input  #file type=\\\"file\\\" [hidden]='true' class=\\\"form-control-file\\\" accept=\\\"image/*\\\" (change)=\\\"onFileChange($event)\\\" >\\n                <button \\n                    [ngClass]=\\\"{'form-control btn btn-sm' : true, 'btn-light': !fileName, 'btn-success': fileName}\\\"  \\n                    (click)=\\\"file.click()\\\"\\n                >Choose avatar</button>\\n                <label class=\\\"font-itali\\\"> {{fileName}}</label>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <button [disabled]=\\\"registerForm?.invalid || error\\\" class=\\\"btn btn-primary\\\" (click)=\\\"onSubmit(registerForm)\\\">Register</button>\\n                <a [routerLink]=\\\"['/login']\\\" class=\\\"btn btn-link\\\">Cancel</a>\\n            </div>\\n            <div [hidden]='!error' class=\\\"alert alert-danger\\\" role=\\\"alert\\\">\\n                {{ error }}\\n            </div>\\n        </form>\\n            \\n    </div>\\n</div>\\n\"","export default \".registration-wrapper {\\n  background: #D7DFE7;\\n  height: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center; }\\n  .registration-wrapper .box {\\n    width: 40%; }\\n  .ng-valid:not(form) {\\n  border-left: 5px solid #42A948; }\\n  .error-text {\\n  color: #a94442;\\n  padding: 0px 7px; }\\n  @media screen and (max-width: 900px) {\\n  .login-wrapper .box {\\n    width: 60%; } }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXV0aC9yZWdpc3Rlci9jb21wb25lbnRzL3JlZ2lzdHJhdGlvbi9EOlxcR2l0XFxHZW5lc2lzXFx3ZWIvc3JjXFxhcHBcXGF1dGhcXHJlZ2lzdGVyXFxjb21wb25lbnRzXFxyZWdpc3RyYXRpb25cXHJlZ2lzdHJhdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLG1CQUFtQjtFQUNuQixZQUFZO0VBRVosYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUIsRUFBQTtFQU52QjtJQVNRLFVBQVUsRUFBQTtFQUlsQjtFQUNJLDhCQUE4QixFQUFBO0VBR2xDO0VBQ0ksY0FBYztFQUNkLGdCQUFnQixFQUFBO0VBR3BCO0VBQ0k7SUFFUSxVQUFVLEVBQUEsRUFDYiIsImZpbGUiOiJzcmMvYXBwL2F1dGgvcmVnaXN0ZXIvY29tcG9uZW50cy9yZWdpc3RyYXRpb24vcmVnaXN0cmF0aW9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnJlZ2lzdHJhdGlvbi13cmFwcGVyIHtcclxuICAgIGJhY2tncm91bmQ6ICNEN0RGRTc7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcblxyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHJcbiAgICAuYm94IHtcclxuICAgICAgICB3aWR0aDogNDAlO1xyXG4gICAgfVxyXG59XHJcblxyXG4ubmctdmFsaWQ6bm90KGZvcm0pICB7XHJcbiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkICM0MkE5NDg7XHJcbn1cclxuXHJcbi5lcnJvci10ZXh0IHtcclxuICAgIGNvbG9yOiAjYTk0NDQyO1xyXG4gICAgcGFkZGluZzogMHB4IDdweDtcclxufVxyXG5cclxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogOTAwcHgpIHtcclxuICAgIC5sb2dpbi13cmFwcGVyIHtcclxuICAgICAgICAuYm94IHtcclxuICAgICAgICAgICAgd2lkdGg6IDYwJTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0= */\"","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators, AbstractControl } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Store, select } from '@ngrx/store';\nimport * as fromUser from '../../../../ngrx/user-module/reducers';\nimport { take, map } from 'rxjs/operators';\n// services\nimport { RegistrationService } from './registration.service';\nimport { SetUserData } from 'src/app/ngrx/user-module/actions/user.actions';\nimport { User } from 'src/app/ngrx/user-module/models/user';\nimport { LoginService } from 'src/app/auth/login/components/login/login.service';\n\n@Component({\n\tselector: 'app-registration',\n\ttemplateUrl: './registration.component.html',\n\tstyleUrls: ['./registration.component.scss'],\n\tproviders: [LoginService, RegistrationService]\n})\nexport class RegistrationComponent implements OnInit {\n\n\tpublic registerForm: FormGroup;\n\tpublic error = '';\n\tpublic fileName = '';\n\tpublic saltRounds = 10;\n\n\tpublic isUserLoggedIn$ = this.store.pipe(select(fromUser.isUserLoggedIn));\n\n\tconstructor(\n\t\tprivate formBuilder: FormBuilder,\n\t\tprivate router: Router,\n\t\tprivate store: Store<any>,\n\t\tprivate cd: ChangeDetectorRef,\n\t\tprivate loginService: LoginService,\n\t\tprivate registrationService: RegistrationService\n\t) {\n\t\tthis.redirectIfAlreadyLoggedIn();\n\t}\n\n\tngOnInit() {\n\t\tthis.registerForm = this.formBuilder.group({\n\t\t\temail: [\n\t\t\t\t'test@gmail.com',\n\t\t\t\t[Validators.required],\n\t\t\t\tthis.validateEmailNotTaken.bind(this)\n\t\t\t],\n\t\t\tusername: [\n\t\t\t\t'test',\n\t\t\t\t[Validators.required],\n\t\t\t\tthis.validateUserNameNotTaken.bind(this)\n\t\t\t],\n\t\t\tfile: [null, Validators.required],\n\t\t\tpassword: ['test123', [Validators.required, Validators.minLength(6)]],\n\t\t\tconfirmPassword: ['test123', [Validators.required, Validators.minLength(6)]]\n\t\t}, {\n\t\t\tvalidator: this.MustMatch('password', 'confirmPassword')\n\t\t});\n\t}\n\n\tvalidateEmailNotTaken(control: AbstractControl) {\n\t\treturn this.registrationService.checkEmailNotTaken(control.value).pipe(\n\t\t\tmap(res => {\n\t\t\t\treturn res ? null : { emailTaken: true };\n\t\t\t})\n\t\t);\n\t}\n\n\tvalidateUserNameNotTaken(control: AbstractControl) {\n\t\treturn this.registrationService.checkUserNameNotTaken(control.value).pipe(\n\t\t\tmap(res => {\n\t\t\t\treturn res ? null : { userNameTaken: true };\n\t\t\t})\n\t\t);\n\t}\n\n\tredirectIfAlreadyLoggedIn() {\n\t\tthis.isUserLoggedIn$.pipe(take(1)).subscribe((userLoggedIn: boolean) => {\n\t\t\tif (userLoggedIn) {\n\t\t\t\tthis.router.navigateByUrl('chat');\n\t\t\t}\n\t\t})\n\t}\n\n\tMustMatch(controlName: string, matchingControlName: string) {\n\t\treturn (formGroup: FormGroup) => {\n\t\t\tconst control = formGroup.controls[controlName];\n\t\t\tconst matchingControl = formGroup.controls[matchingControlName];\n\n\t\t\tif (matchingControl.errors && !matchingControl.errors.mustMatch) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (control.value !== matchingControl.value) {\n\t\t\t\tmatchingControl.setErrors({ mustMatch: true });\n\t\t\t} else {\n\t\t\t\tmatchingControl.setErrors(null);\n\t\t\t}\n\t\t}\n\t}\n\n\tget username() { return this.registerForm.get('username'); }\n\tget email() { return this.registerForm.get('email'); }\n\tget file() { return this.registerForm.get('file'); }\n\tget password() { return this.registerForm.get('password'); }\n\tget confirmPassword() { return this.registerForm.get('confirmPassword'); }\n\n\tgetErrorMessage(e: any) {\n\t\tif (e.errors) {\n\t\t\tconst K = Object.keys(e.errors);\n\t\t\tswitch (K[0]) {\n\t\t\t\tcase 'email': return 'Incorrect format';\n\t\t\t\tcase 'required': return 'Field is required';\n\t\t\t\tcase 'mustMatch': return 'Passwords must match';\n\t\t\t\tcase 'emailTaken': return 'Email taken';\n\t\t\t\tcase 'userNameTaken': return 'User name is taken';\n\t\t\t\tcase 'minlength': return 'Password is too short (minimum is 6 characters)';\n\t\t\t\tdefault: return '';\n\t\t\t}\n\t\t}\n\t}\n\n\tonFileChange(event: any) {\n\t\tconst reader = new FileReader();\n\n\t\tif (event.target.files && event.target.files.length) {\n\t\t\tconst [file] = event.target.files;\n\t\t\tthis.fileName = file.name;\n\n\t\t\treader.readAsDataURL(file);\n\t\t\treader.onload = () => {\n\t\t\t\tthis.registerForm.patchValue({\n\t\t\t\t\tfile: reader.result\n\t\t\t\t});\n\t\t\t\tthis.cd.markForCheck();\n\t\t\t};\n\t\t}\n\t}\n\n\tonSubmit() {\n\t\tconst data = {\n\t\t\tusername: this.username.value,\n\t\t\temail: this.email.value,\n\t\t\tpassword: this.password.value,\n\t\t\tavatar: this.file.value\n\t\t}\n\n\t\tthis.registrationService.createUser(data)\n\t\t.pipe(take(1))\n\t\t.subscribe(\n\t\t  (res: User) => {\n\t\t\tthis.login({ username: data.email, password: data.password});\n\t\t  },\n\t\t  (error: string) => {\n\t\t\tthis.error = 'Error'\n\t\t\tthis.cleanErrorText();\n\t\t  }\n\t\t)\n\t}\n\n\tlogin(data) {\n\t\tthis.loginService.login(data)\n\t\t.pipe(take(1))\n\t\t.subscribe(\n\t\t  (res: User) => {\n\t\t\tthis.store.dispatch(new SetUserData(res));\n\t\t\tthis.router.navigateByUrl('chat');\n\t\t  },\n\t\t  (error: string) => {\n\t\t\tthis.error = \"Can't login\"; \n\t\t\tthis.cleanErrorText();\n\t\t  }\n\t\t)\n\t}\n\n\tcleanErrorText() {\n\t\tthis.registerForm.valueChanges\n\t\t.pipe(take(1))\n\t\t.subscribe(e => {\n\t\t  this.error = '';\n\t\t}) \n\t}\n\n}\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { HttpHeaders } from '@angular/common/http';\r\nimport { environment } from '../../../../../environments/environment';\r\n\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { User } from 'src/app/ngrx/user-module/models/user';\r\n\r\nconst httpOptions = {\r\n  headers: new HttpHeaders({\r\n    'Content-Type':  'application/json'\r\n  })\r\n};\r\n\r\n@Injectable()\r\nexport class RegistrationService {\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  checkEmailNotTaken(email: string) {\r\n    return this.http.post(`${environment.apiUrl}/user/allUserEmails`, {email: email}, httpOptions).pipe(\r\n        map((isUniq: boolean) => isUniq)\r\n    )\r\n  }\r\n\r\n  checkUserNameNotTaken(username: string) {\r\n    return this.http.post(`${environment.apiUrl}/user/isUserNameIsUniq`, {name: username}, httpOptions).pipe(\r\n        map((isUniq: boolean) => isUniq)\r\n    )\r\n  }\r\n\r\n  createUser(data: User): Observable<any> {\r\n    return this.http.post<User>(`${environment.apiUrl}/auth/registerUser`, data, httpOptions)\r\n  }\r\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n// components\nimport { RegistrationComponent } from './components/registration/registration.component';\n\nconst routes: Routes = [\n  { path: '', component: RegistrationComponent }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [RouterModule]\n})\nexport class RegisterRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { RegisterRoutingModule } from './register-routing.module';\nimport { RegistrationComponent } from './components/registration/registration.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [RegistrationComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RegisterRoutingModule\n  ]\n})\nexport class RegisterModule { }\n"],"sourceRoot":"webpack:///"}